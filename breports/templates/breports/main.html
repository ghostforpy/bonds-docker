{% extends "base.html" %}
{% load static %}
{% block page_css %}
  <link rel="stylesheet" href="{% static 'css/daterangepicker/daterangepicker.css' %}">
  <link rel="stylesheet" href="{% static 'css/toast/toast.css' %}">
  <!-- Load required BootstrapVue CSS -->
  <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />
  <!-- Load polyfills to support older browsers -->
<script src="//polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver" crossorigin="anonymous"></script>
  
  <!-- Load Vue followed by BootstrapVue -->
  {% if mode == 'production' %}
      <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    {% else %}
      <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  {% endif %}
  <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>

{% endblock page_css %}

{% block content %}
<div class="container">
  <div id="app">
    [[message]]
    <p></p>
    <b-form-file
      v-model="file"
      :state="Boolean(file)"
      placeholder="Выберите или перетащите файл..."
      drop-placeholder="Перетащите файл..."
      accept=".xls, .xlsx"
    ></b-form-file>
    <p></p>
    <div>
      <b-button-group>
        <b-button v-on:click="calc_year_profit">Year profit</b-button>
        <b-button v-on:click="func2">func 2</b-button>
        <b-button v-on:click="func3">func 3</b-button>
      </b-button-group>
    </div>
    <errors class="mt-3" v-if="errors_visible" v-bind:errors="errors"></errors>
    <div v-if="spiner_visible" class="d-flex justify-content-center mt-3">
      <b-spinner label="Loading..."></b-spinner>
    </div>
    <div id="year_profit_part" v-if="year_profit_visible" class="mt-3">
      <year-profit v-bind:year_profit="year_profit_data.year_profit"></year-profit>
      <total-invests v-bind:total_invests="year_profit_data.invests"></total-invests>
      <today-cash v-bind:today_cash="year_profit_data.today_cash"></today-cash>
      <div class="row">
        <invests class="col-12 col-lg-4" v-bind:invests="year_profit_data.invests"></invests>
        <securities class="col-12 col-lg-8" v-bind:securities="year_profit_data.securities"></securities>
      </div>
    </div>
  </div>
</div>
{% endblock content %}

{% block domready %}
{% endblock domready %}


{% block page_javascript %}
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="{% static 'vue/breports/main.js' %}"></script>
    <script src="{% static 'vue/breports/components.js' %}"></script>
    <script src="{% static 'js/toast/toast.js' %}"></script>
    <script src="{% static 'js/daterangepicker/moment.min.js' %}"></script>
    <script src="{% static 'js/daterangepicker/daterangepicker.js' %}"></script>
{% endblock page_javascript %}
